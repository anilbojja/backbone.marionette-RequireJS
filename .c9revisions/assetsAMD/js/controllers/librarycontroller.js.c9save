{"ts":1348420424908,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// librarycontroller.js\n// Ted Killilea 5/31/12  @t2k_nyc\ndefine(['underscoreM', 'marionette', 'vent', 'models/books', 'views/booklist', 'templates', 'views/search'], function(_, Marionette, vent, BooksModel, Booklist, templates, SearchView) {\n    'use strict';\n    \n    // public module API\n    var Controller = {};\n    \n    var Layout = Marionette.Layout.extend({\n        template: _.template(templates.librarylayout),\n\n        regions: {\n            search: \"#searchBar\",\n            books: \"#bookContainer\"\n        }\n    });\n\n    // books collection model as private\n    var _books = new BooksModel();\n\n    // private\n    var _initializeLayout = function() {\n        console.log('initializeLayout...');\n        Controller.layout = new Layout();\n            Controller.layout.on(\"show\", function() {\n            vent.trigger(\"layout:rendered\");\n        });\n        vent.trigger('app:show', Controller.layout);\n    };\n\n    // controller attach a sub view/ search View\n    vent.on(\"layout:rendered\", function() {\n        console.log('layout:rendered =>librarycontroller'); \n        // render a view for the existing HTML in the template, and attach it to the layout (i.e. don't double render)\n        var searchView = new SearchView();\n        Controller.layout.search.attachView(searchView);\n    });\n    \n    // controller show books in the layout / subview\n    vent.on('show:books', function(bookListView) {\n        // console.log('show books event');\n        Controller.layout.books.show(bookListView);\n    });\n\n\n    // public API\n    Controller.search = function(term) {\n        _initializeLayout();\n        Booklist.showBooks(_books);\n        vent.trigger(\"search:term\", term);\n    };\n\n    // public API\n    Controller.defaultSearch = function() {\n        console.log('Controller.defaultSearch =>librarycontroller');\n        Controller.search(_books.previousSearch || 'West Higlhand Terrier');\n    };\n\n\n    return Controller;\n});"]],"start1":0,"start2":0,"length1":0,"length2":1935}]],"length":1935}
{"contributors":[],"silentsave":false,"ts":1348421687476,"patch":[[{"diffs":[[0,"    };\n\n"],[-1,"\n"],[0,"    retu"]],"start1":1900,"start2":1900,"length1":17,"length2":16}]],"length":1934,"saved":false}
