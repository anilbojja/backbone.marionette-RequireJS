{"ts":1341491032416,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// libraryapp.js\n// Ted Killilea 5/31/12  @t2k_nyc\n// note: very important to get the 'dependent array [...] correct to resolve tricky circular references...\ndefine(['require','app', 'views/booklist', 'models/book', 'jquery', 'underscore', 'backbone', 'marionette' ], function (require, App, BookList, BookModel) {\n    'use strict';\n    var $ = require('jquery'),\n        _ = require('underscore'),\n        Backbone = require('backbone'),\n        Marionette = require('marionette');\n\n\n    var LibraryApp = {};\n\n    var Layout = Backbone.Marionette.Layout.extend({\n        template: \"#library-layout\",\n\n        regions: {\n            search: \"#searchBar\",\n            books: \"#bookContainer\"\n        }\n    });\n    \n    // leave books private\n    var Books = new BookModel();\n    \n    //LibraryApp.Books = new Books();\n\n    LibraryApp.initializeLayout = function () {\n        //console.log('initialized the layout!')\n        LibraryApp.layout = new Layout();\n\n        LibraryApp.layout.on(\"show\", function () {\n            App.vent.trigger(\"layout:rendered\");\n        });\n        App.content.show(LibraryApp.layout);\n    };\n\n    LibraryApp.search = function (term) {\n        LibraryApp.initializeLayout();\n        BookList.showBooks(Books);\n        App.vent.trigger(\"search:term\", term);\n    };\n\n    LibraryApp.defaultSearch = function () {\n        console.log('defaultSearch was called');\n        LibraryApp.search(Books.previousSearch || 'BackboneJS');\n    };\n\n    return LibraryApp;\n});"]],"start1":0,"start2":0,"length1":0,"length2":1487}]],"length":1487}
