{"ts":1341332995526,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// App.js: Ted Killilea June 2012  twitter.com/@t2k_nyc\ndefine(['require', 'bootstrapModal', 'underscore', 'BBM' /* , 'marionette' */ ], function(require) {\n    'use strict';\n    var $ = require('jquery'),\n        _ = require('underscore'),\n        Backbone = require('BBM');\n        // Marionette = require('marionette');\n\n    var app = new Backbone.Marionette.Application();\n\n    var ModalRegion = Backbone.Marionette.Region.extend({\n        el: \"#modal\",\n        constructor: function() {\n            _.bindAll(this);\n            Backbone.Marionette.Region.prototype.constructor.apply(this, arguments);\n            this.on(\"view:show\", this.showModal, this);\n        },\n        getEl: function(selector) {\n            var $el = $(selector);\n            $el.on(\"hidden\", this.close);\n            return $el;\n        },\n        showModal: function(view) {\n            view.on(\"close\", this.hideModal, this);\n            this.$el.modal('show');\n        },\n        hideModal: function() {\n            this.$el.modal('hide');\n        }\n    });\n\n    app.addRegions({\n        content: \"#content\",\n        menu: \"#menu\",\n        modal: ModalRegion\n    });\n\n\n    // modal popup/book view is triggers\n    app.vent.on('modal:book', function(bookModel) {\n        /* var DetailView = require('views/bookdetail');\n\n        var detailView = new DetailView({\n            model: bookModel\n        });\n        app.modal.show(detailView);\n        */\n    });\n\n    app.vent.on(\"layout:rendered\", function() {\n        console.log('layout was rendered');\n    });\n\n    app.vent.on(\"routing:started\", function() {\n        console.log('routing has been started!');\n        if (!Backbone.History.started) {\n            console.log('Yes indeed, routing has been started!');\n            Backbone.history.start();\n        }\n    });\n\n    app.vent.on(\"search:term\", function(searchTerm) {\n        Backbone.history.navigate(\"search/\" + searchTerm);\n    });\n\n    app.on('start', function() {\n        console.log('start!');\n    });\n\n    app.on('initialize:before', function() {\n        console.log('init:before');\n    });\n\n    app.on('initialize:after', function() {\n        console.log('init:after');\n    });\n\n    app.addInitializer(function() {\n        Backbone.Marionette.TemplateCache.loadTemplate = function(templateId, callback) {\n            // Marionette expects \"templateId\" to be the ID of a DOM element.\n            // But with RequireJS, templateId is actually the full text of the template.\n            var template = templateId;\n            // Make sure we have a template before trying to compile it\n            if (!template || template.length === 0) {\n                var msg = \"Could not find template: '\" + templateId + \"'\";\n                var err = new Error(msg);\n                err.name = \"NoTemplateError\";\n                throw err;\n            }\n            template = this.compileTemplate(template);\n            callback.call(this, template);\n        };\n    });\n\n\n    // export the app from this module\n    return app;\n\n\n});"]],"start1":0,"start2":0,"length1":0,"length2":3020}]],"length":3020}
{"contributors":[],"silentsave":false,"ts":1347653511428,"patch":[[{"diffs":[[0,"', '"],[-1,"BBM' /*"],[1,"backbone'"],[0," , '"]],"start1":104,"start2":104,"length1":15,"length2":17},{"diffs":[[0,"ionette'"],[-1," */"],[1,",'vent'"],[0," ], func"]],"start1":124,"start2":124,"length1":19,"length2":23},{"diffs":[[0,"re('"],[-1,"BBM');"],[1,"backbone'),"],[0,"\n       "],[-1," //"],[0," Mar"]],"start1":271,"start2":271,"length1":25,"length2":27},{"diffs":[[0,"riggers\n    "],[-1,"app."],[0,"vent.on('mod"]],"start1":1194,"start2":1194,"length1":28,"length2":24},{"diffs":[[0,"    "],[-1," /*"],[0," var"]],"start1":1253,"start2":1253,"length1":11,"length2":8},{"diffs":[[0,"    "],[-1,"*/"],[0,"\n   "]],"start1":1428,"start2":1428,"length1":10,"length2":8},{"diffs":[[0,"  \n    });\n\n    "],[-1,"app."],[0,"vent.on(\"layout:"]],"start1":1430,"start2":1430,"length1":36,"length2":32},{"diffs":[[0,");\n    });\n\n    "],[-1,"app."],[1,""],[0,"vent.on(\"routing"]],"start1":1527,"start2":1527,"length1":36,"length2":32},{"diffs":[[0,");\n\n    "],[-1,"app."],[1,""],[0,"vent.on("]],"start1":1793,"start2":1793,"length1":20,"length2":16}]],"length":3007,"saved":false}
